
# Node Boilerplate in Typescript

This TypeScript Node.js boilerplate is designed to provide a robust foundation for scalable web applications with a focus on early error detection, enhanced developer experience, and type safety. It integrates several extra features to streamline development and improve efficiency. Additionally, it includes Swagger documentation generation to enhance API documentation and developer experience further.


## Environment Variables

To run this project, you will need to add the following environment variables to your .env file

`ENV_MODE`
`MORGAN`
`PORT`

### Example

```javascript
// Example ENV File 
ENV_MODE= DEV,PROD OR STAG
MONGODB_URI = MONGODB_URI
MORGAN = combined
DB_NAME='db_name_here '
SECRET=secret_here
PORT=5300
API_PREFIX = /api/v1
EMAIL_HOST = smtp.gmail.com or sendgrid
```






## Getting Started

These instructions will get you a copy of the project up and running on your local machine for development and testing purposes.

### Prerequisites

`1`.Node.js (^v18.17.0 or greater ) and npm installed on your machine

`2`. Install AWS-CLI in Your System

`3`. Configure AWS With AWS-CLI With --Profile flag [project_name] With Credentials

```Language
aws configure --profile [project_name]
```
`4`. Replace Project Name In Package.json It Has Dev Command in scripts
```Language
export AWS_PROFILE=[project_name] && export AWS_SDK_LOAD_CONFIG=1 && concurrently \"nodemon\" \"nodemon -x tsoa spec\""
```


### Installing

`1`. Clone the repository:
```Language
git clone https://[user_name]@bitbucket.org/sachtechprojectmanagers/nodejs_ts_boiler.git
```

`2`. Navigate into the project directory:

```Language
cd your-project
```

`3`. Install dependencies:

```Language
npm install
```

### Running the App

Start the development server:

```Language
npm run dev
```

### Project Folder Structure

- `logs`: This directory contains error log files generated with Winston logging library.
- `public`: The public folder serves as the endpoint for serving static assets and contains additional resources necessary for the application's functionality.
        
         *`swagger`: This JSON file is automatically generated by TSOA to document the API endpoints in Swagger format.
         *`index.html`: Show Project Running State, 

- `src`: Contains the source Code of the Node JS Project.
  - `config`: Static assets such as images, fonts, etc.
       
        *`logger.config.ts`: The logger configuration file used for generating error log files with Winston logging library.
        *`mongoose.config.ts`: The configuration file used for establishing the MongoDB database connection.

  - `constant`: This directory contains constant values used throughout the application..   
   
        *`app.constant.ts`: Contains constant values such as PORT, AWS PARAMETERS, API PREFIX, EMAIL CREDENTIALS, JWT SECRET, ACCESS EXPIRY, and REFRESH EXPIRY. 
        *`responseMessage.constant.ts`: Contains response messages used in the project. 

  - `routes`:  Route handlers defining the application's endpoints and their corresponding HTTP methods.
      - `Admin`: Route handlers specific to the Admin feature.
      - `Common`: Route handlers common to multiple features.
      - `User`: Route handlers specific to the User feature.

  - `controllers`: Contains controller files responsible for handling incoming requests.
      - `Admin`: Controller files for the Admin feature.
      - `Common`: Controller files common to multiple features.
      - `User`: Controller files for the User feature.

  - `handlers`: Contains handler files responsible for processing incoming requests and(Apply Business Logic ) interacting with the appropriate Database & services.
       - `Admin`: Handler files for Process Requests for the Admin feature.
      - `Common`: Handler files for Process Requests for the Common feature.
      - `User`: Handler files for Process Requests for the User feature.

  - `helpers`: Utility/helper functions.
          
        *`common.helper.ts`: Utility/helper functions common to multiple features.
        *`db.helpers.ts`: Utility/helper functions for database operations.
        *`fs.helper.ts`: Utility/helper functions for file system operations.

  - `middlewares`: Middleware functions responsible for handling various tasks such as authentication and request validation.

        *`auth.middleware.ts`: Middleware for handling Jwt authentication.
        *`busBoy.middleware.ts`:  Middleware for handling file uploads using Busboy.
        *`multer.middleware.ts`: Middleware for handling file uploads using Multer.
        *`validation.middleware.ts`: Middleware for handling data validation with Joi.

  - `models`: Contains data models representing the structure of the application's data.

       - `Admin`: Data models specific to the Admin feature.
      - `Common`: Data models specific to the Common feature.
      - `User`: Data models specific to the User feature.

  - `services`: Contains service files encapsulating business logic not directly related to handling HTTP requests or database interactions.

        *`aws.service.ts`: Service for interacting with AWS services.
        *`nodemailer.service.ts`: Service for sending emails using Nodemailer.
        *`notification.service.ts`:  Service for sending notifications.

  - `templates`: Directory for storing template files used for generating dynamic content.
  - `utils`: Utility functions providing reusable functionalities or helper methods.

        *`auth.util.ts`: Contains utility functions related to authentication, including bcrypt functions for password hashing and verification.
        *`bootstrap.util.ts`: Contains utility functions related to bootstrapping the application, such as seed functions to seed pre-required data and admin into the database.
        *`config.util.ts`:Contains utility functions related to configuration, such as rate limiter configurations, Redis queue configurations, and functions to retrieve parameters according to the ENV_MODE.
        *`interfaces.util.ts`: Contains type interfaces for functions and variables used throughout the project, ensuring consistency and type safety.
        *`response.util.ts`: Contains utility functions related to handling API responses, including formatting the output format of API responses to ensure consistency and ease of use for consumers.

  - `validations`:  Contains validation logic ensuring incoming data meets specified criteria or constraints With Joi.
     - `Admin`: Validation logic specific to the Admin feature.
      - `Common`: Validation logic specific to the Common feature.
      - `User`: Validation logic specific to the User feature.

 - `server.ts`: The main entry point of the application where the server is instantiated and configured, and the application starts listening for incoming requests.

- `.env`: This file contains environment variables used for configuring the application, such as database connection strings, API keys, and other sensitive information.
- `package.json`:  The package.json file contains metadata about the project and specifies the project's dependencies, scripts, and other information required for managing the project with npm
- `tsconfig.json`: The tsconfig.json file is a TypeScript configuration file that specifies compiler options and project settings for TypeScript files in the project.
- `tsoa.json`: The tsoa.json file is a configuration file for TSOA (TypeScript OpenAPI), a library used for generating Swagger documentation from TypeScript controllers and models. It defines settings and options for generating the Swagger specification file.

### Add On Features

 #### `1`.Swagger Automated Documentation.

    Automated generation of Swagger documentation for API endpoints using TSOA. This removes the need for manual management of Postman collections and provides a standardized and up-to-date API documentation.

 #### `2`.PreConfigured Project Environment for Typescript.

    Preconfigured environment setup tailored for TypeScript projects. This includes a pre-configured tsconfig.json file to streamline TypeScript compilation and project settings.

  #### `3`.App Constants for Environment Configuration.

    Centralized management of application constants for environment configuration. This includes constants such as PORT, API endpoints, database connections, and other environment-specific configurations. Credentials for these constants can be sourced from .env file or environment variables for enhanced security.

  #### `4`.Morgan + Winston Logger.

    Integration of Morgan and Winston loggers for logging HTTP requests/responses and application-level logs. Morgan captures HTTP request logs, while Winston provides customizable logging capabilities for various log levels and transports.

  #### `5`.Admin + User Basic Auth And Content management Api's (T&C, Privacy, FAQ, About Us).

    User And Admin Auth Apis And Basic Content Management API endpoints for managing terms and conditions, privacy policies, FAQs, and about us pages. These endpoints facilitate CRUD operations for managing content dynamically.

 #### `6`.Rate Limiter with IP.

    Implementation of a rate limiter to restrict the number of requests from a single IP address within a specified time frame. This helps mitigate abuse or DoS attacks and ensures fair usage of resources.

 #### `7`.Filesystem Helper Functions.

    Utility functions for common filesystem operations, such as file upload, download, deletion, and manipulation. These functions simplify file handling tasks within the application.

 #### `8`.Initial Aws Services Integration.

    Initial integration of AWS services, enabling the application to interact with various AWS services such as S3 (Simple Storage Service), SES (Simple Email Service), or others as required.

 #### `9`.Predefined Email Templates with EJS.

    Predefined email templates using EJS (Embedded JavaScript) for generating dynamic email content. EJS templates allow for the creation of HTML-based email templates with dynamic data insertion.

   #### `10`.Bcrypt Hash Generation and Encryption.

    Integration of Bcrypt for secure password hashing and encryption. Bcrypt provides a robust and industry-standard method for hashing passwords, ensuring user data security.

#### `11`.Pagination and Aggregation Function.

    Implementation of pagination and aggregation functions for efficient data retrieval and presentation.

#### `12`.Validation Middleware.

    Middleware for request data validation, ensuring that incoming data meets specified criteria or constraints (using JOI)before processing. Validation middleware helps maintain data integrity and security within the application.

#### `13`.Redis DB for Caching Mechanism.

    Integration of Redis as a caching mechanism to improve application performance and scalability. Redis provides fast, in-memory data storage for caching frequently accessed data, reducing database load and response times.



### Important Dependencies 

   `1`. [**ts-node**](https://www.npmjs.com/package/ts-node) (^10.9.2) **:** TypeScript execution environment for running TypeScript code directly without transpiling to JavaScript.

   `2`. [**tsoa**](https://www.npmjs.com/package/tsoa) (^6.6.0) **:** TypeScript OpenAPI (Swagger) toolchain for generating Swagger documentation and API client code from TypeScript controllers and models.

   `3`. [**swagger-ui-express**](https://www.npmjs.com/package/swagger-ui-express) (^5.0.1) **:** Express middleware for serving Swagger UI, which provides an interactive API documentation interface based on Swagger/OpenAPI specifications.

   `4`. [**aws-sdk**](https://www.npmjs.com/package/aws-sdk) (^2.1692.0) **:** Official AWS SDK for JavaScript, providing APIs for interacting with various AWS services such as S3, DynamoDB, and more.

   `5`. [**@joi**](https://www.npmjs.com/package/joi) (^17.13.3) **:** Powerful schema description language and data validator for JavaScript and Node.js, used for validating and sanitizing input data.

   `6`. [**bcryptjs**](https://www.npmjs.com/package/bcryptjs) (^2.4.3) **:** Library for hashing passwords securely, commonly used for user authentication and password management.

   `7`. [**ejs**](https://www.npmjs.com/package/ejs) (^3.1.10) **:** Embedded JavaScript templating engine for generating dynamic HTML content based on template files, often used for server-side rendering in Node.js applications.

   `8`. [**bull**](https://www.npmjs.com/package/bull) (^4.16.5) **:** Node.js library for handling distributed background jobs and message queues, providing robust queue management and processing capabilities.

   `9`. [**winston**](https://www.npmjs.com/package/winston) (^3.17.0) **:** Versatile logging library for Node.js, offering multiple transports (e.g., console, file, database) and customizable logging levels for efficient log management and debugging.

   `10`. [**morgan**](https://www.npmjs.com/package/morgan) (^1.10.0) **:** HTTP request logger middleware for Express.js, used for logging HTTP request details such as method, URL, status code, and response time for debugging and monitoring purposes.

`11`. [**mongoose**](https://www.npmjs.com/package/mongoose) (^8.2.1) **:** An Object Data Modeling (ODM) library for MongoDB and Node.js. It provides a schema-based solution for modeling application data, including features such as built-in type casting, validation, query building, middleware support, and more. It simplifies interactions with MongoDB databases in Node.js applications, enabling developers to define schemas, create models, perform CRUD operations, and execute advanced queries easily.
